# Photos by Logan Wu

A lightweight, static photography portfolio website showcasing pole dance and aerial arts event photography and photoshoots. This project includes a static frontend hosted on GitHub Pages and a Python backend for the private gallery feature.

## ‚ú® Features

*   **Dynamic Image Gallery:** Automatically generates image thumbnails and displays full-size images in a responsive grid.
*   **Lightbox Viewer:** Full-screen image viewing with navigation (keyboard, on-screen buttons, and swipe gestures).
*   **Private Galleries:** A secure, password-protected gallery feature for clients, powered by a Python backend.
*   **Responsive Design:** Optimized for various screen sizes.
*   **Minimal UI:** Clean and professional user interface built with pure CSS.
*   **Automated Build Process:** Uses a Node.js script to generate static HTML files.

## Architecture Overview

This project is a monorepo containing two main components:

1.  **Frontend:** A static website built with HTML, CSS, and vanilla JavaScript. It's responsible for the public-facing portfolio and the user interface for the private galleries.
2.  **Backend:** A Python FastAPI application that handles password verification and serves secure, temporary URLs for images in private galleries. It is designed to be deployed as a serverless function on Google Cloud.

---

## Frontend

The frontend is a static site generated by a Node.js script.

### Getting Started (Frontend)

**Prerequisites:**
*   [Node.js](https://nodejs.org/) installed.

**Installation & Usage:**
1.  **Clone the repository:**
    ```bash
    git clone https://github.com/loganbu/photography-portfolio.git
    cd photography-portfolio
    ```
2.  **Install dependencies:**
    ```bash
    cd frontend
    npm install
    cd ..
    ```
3.  **Build the website:**
    This script generates the static HTML files in the `docs/` directory.
    ```bash
    node scripts/build.js
    ```
    **Note:** Do not modify files in `docs/` directly. Edit `frontend/base.html.template` or the partials in `frontend/partials/` and re-run the build script.

4.  **View locally:**
    ```bash
    open docs/index.html
    ```

### Deployment (Frontend)

The frontend is deployed via GitHub Pages from the `docs/` directory of the `main` branch. To deploy, push your changes to the `main` branch on GitHub.

---

## Backend (Private Gallery)

The backend is a FastAPI application managed with [Rye](https://rye-up.com/) that provides secure access to private photo galleries stored in Google Cloud Storage (GCS).

### How It Works

1.  **Password/Prefix Verification:** The "password" submitted by a client is the name of a folder (GCS prefix) in the storage bucket.
2.  **Secure Image Access:** The backend lists images within that GCS folder and generates secure, temporary (signed) URLs for them.

### Setup and Running Locally (Backend)

**Prerequisites:**
*   **Rye:** [Installation Guide](https://rye-up.com/guide/installation/)
*   **Google Cloud SDK:** [Installation Guide](https://cloud.google.com/sdk/docs/install)
    *   After installing, initialize and authenticate:
        ```bash
        gcloud init
        gcloud auth application-default login
        ```

**Configuration:**
*   Ensure your `GCS_BUCKET_NAME` is set correctly in `scripts/sync_gcs.py` and `backend/main.py`.

**Installation & Usage:**
1.  **Navigate to the backend directory and install dependencies:**
    ```bash
    cd backend
    rye sync
    ```
2.  **Run the development server:**
    ```bash
    rye run start
    ```
    The application will be accessible at `http://localhost:8001`.

### Publishing a New Private Gallery

1.  **Create a Client Folder:** Inside `backend/gcs_local_staging/`, create a new folder. The folder name will be the gallery password (e.g., `client-jane-doe`).
2.  **Add Photos:** Copy the client's photos into the new folder.
3.  **Sync to GCS:** From the `backend` directory, run the sync script:
    ```bash
    rye run sync-gcs
    ```

### Deployment (Backend)

The backend is deployed to Google Cloud Functions (2nd Gen) using the `deploy.sh` script.

1.  **Run the deployment script from the `backend` directory:**
    ```bash
    cd backend
    rye run deploy
    ```
2.  **Update Frontend Config:** The script will output a **Trigger URL**. Copy this URL and update the `backendUrl` variable in `frontend/assets/js/private-gallery.js`.
3.  **Re-build and deploy the frontend** to apply the changes.

### Security Notes

*   **CORS:** Update the `origins` list in `backend/main.py` to your frontend domain for production.
*   **IAM Permissions:** The function's service account needs the `Storage Object Viewer` and `Service Account Token Creator` roles.

## ü§ù Contributing

Contributions are welcome! Please feel free to open an issue or submit a pull request.
